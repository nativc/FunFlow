## 注册功能

### 需求分析
- 使用邮箱作为注册入口
- 防止滥用邮箱发送邮件服务

### 基本流程

1. 用户提交邮箱和图形验证码，校验通过后将收到邮箱验证码
2. 填写邮箱验证码和自定义密码，完成账号注册

### 涉及接口

- 获取图形验证码 - `GET /api/auth/captcha`
- 发送邮箱验证码 - `POST /api/auth/send-email-code`
- 用户注册 - `POST /api/auth/register`

## 登录功能

### 需求分析

- 用户输入邮箱、密码，进行登录操作
- 使用图形验证码防止机器人、脚本
- 使用 JWT 保存用户登录状态信息

### 基本流程

1. 页面展示图形验证码
2. 用户输入邮箱、图形验证码、密码进行登录
3. 后端返回 JWT，前端将其保存，之后每次请求都携带 JWT

### 涉及接口

- 获取图形验证码 - `GET /api/auth/captcha`
- 用户登录 - `POST /api/auth/login`

## 认证拦截器

### 需求分析

- 保护需要登录才能访问的接口
- 校验请求是否携带有效的 JWT 令牌
- 将当前用户信息存储到请求上下文中，方便业务代码获取

### 功能实现

1. 配置拦截器，从请求头 `Authorization` 中提取 Bearer Token
2. 验证 Token 是否有效（格式是否正确、是否过期、用户 ID 是否存在）
3. 验证通过后，将 `userId` 存储到 `ThreadLocal` 中，请求完成后自动清理
